version: '3'

services:
  trader: 
    image: go-trader/go-trader:latest
    container_name: go-trader
    ports: 
      - "3001:3001"
    command: ["/app/go-trader/go-trader", "test"]
    environment:
      - APP_DOMAIN=localhost
      - ROOT_URL=http://localhost:3001
      - DB_MONGO_HOST=MONGO:27017
      - DB_MONGO_PASSWD=go-trader
      - DB_MONGO_USERNAME=go-trader
      - DB_MONGO_DB=go-trader
      - REDIS_URL=redis://redis:6379/0
      - CRON_ENABLED=false

  mongo:
    image: mongo:latest
    container_name: trader_mongo
    ports:
      - "27017:27017"
    volumes: 
      - ~/Users/cedric/mongo:/data/db
    command: mongod

  redis:
    image: redis
    container_name: trader_redis
    ports:
      - "${REDIS_PORT:-6380}:6379"